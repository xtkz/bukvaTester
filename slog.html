<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–≥–æ–≤</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&display=swap" rel="stylesheet">
    <style>
        h1 {
            font-size: 13rem;
            font-family: 'Playfair Display', serif;
            font-weight: 400;
            text-align: center;
            margin: 2rem auto 3rem;
		    letter-spacing: -0.5rem;
        }
        div {
            width: 100%;
            text-align: center;
        }
        button {
            font-size: 2rem;
            padding: 2rem 5rem;
        }
        meter {
            width: 70%;
            height: 2rem;
        }
    </style>
    
</head>
<body>
    <h1>–•–•</h1>
    <div>
        <p></p>
        <button type="button" id="btn">–°–ª–µ–¥—É—é—â–∞—è</button>
        <br>
        <meter id="meter" min="0" max="30" value="0"></meter>
    </div>
</body>
<script>
    const vowels = "–ê–£–û–´–ò–ï–Ø–Å–Æ–≠".split("");
    //              –ê–£–û–´–ò–ï–Ø–Å–Æ–≠
    const consonants = "–ù–ú–¢–ö–•–ë–í–ì–î–ñ–ó–õ–ü–†–°–§–¶–ß–®–©".split("");
    //                  –ù–ú–¢–ö–•–ë–í–ì–î–ñ–ó–õ–ü–†–°–§–¶–ß–®–©
    const fwdExceptions = [
    "–∂—è", "–∂—ã", "–∂—é", "–∂—ç",
    "—Ü—è", "—Ü—é", "—Ü—ë", "—Ü—ç", "—Ü—å",
    "—á—è", '—á—é', '—á—ë', '—á—ã', '—á—ç',
    '—à—è', '—à—é', '—à—ã', '—à—ç',
    '—â—è', '—â—é', '—â—ã', '—â—ç', '—â—å',
    '–π—ã', '–π—è', '–π—ë', '–π—é', "–π—ç", '–π—å', 
    '—ë–±', '—ë–ø'];
    const totalCount = 2 * vowels.length * consonants.length - fwdExceptions.length;
    
    let alreadyUsed = [];

    const heading = document.querySelector('h1')
    heading.textContent = '–•–•'

    const parag = document.querySelector('p');

    const meter = document.querySelector("#meter");

    const rndFromArray = (arr) => {
        return arr[Math.floor(Math.random() * (arr.length + 0))]
    }

    let isFWD = true;

    function nextSlog() {
        let slog;
        if (isFWD) {
            slog = rndFromArray(consonants.concat(["–ô"])) + rndFromArray(vowels.concat(["–¨"]));
        } else {
            slog = rndFromArray(vowels) + rndFromArray(consonants.concat(["–ô"]));
        }

        isFWD = !isFWD;
        
        if (!(alreadyUsed.indexOf(slog)+1) && !(fwdExceptions.indexOf(slog.toLowerCase())+1)) {
            return slog;
        } else if (alreadyUsed.length > (totalCount - 1)) {
            return "üôÖ‚Äç‚ôÄÔ∏è";
        } else {
            isFWD = !isFWD;
            return nextSlog();
        }
    }

    const getNextSlog = function(){
        let newSlog = nextSlog();
        heading.textContent = newSlog;
        alreadyUsed.push(newSlog);
        meter.value = alreadyUsed.length;
        parag.textContent = alreadyUsed.length ? alreadyUsed.join(', ') : "";
    }

    document.querySelector("#btn").onclick = getNextSlog;
    window.onload = getNextSlog;

</script>
</html>
